<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>typescript基本知识点总结 | 前端技术积累</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="该博客主要是用来记录自己的学习笔记，对自己的学习历程进行一个简单的记录，也会写一些深入总结性的博客。">
    
    <link rel="preload" href="/blog/assets/css/0.styles.84ac7da4.css" as="style"><link rel="preload" href="/blog/assets/js/app.1db59d1a.js" as="script"><link rel="preload" href="/blog/assets/js/2.b41a7aaa.js" as="script"><link rel="preload" href="/blog/assets/js/1.844c5b44.js" as="script"><link rel="preload" href="/blog/assets/js/211.a8d631c2.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.451e3122.js"><link rel="prefetch" href="/blog/assets/js/100.d9cb7c5b.js"><link rel="prefetch" href="/blog/assets/js/101.5cd72fe8.js"><link rel="prefetch" href="/blog/assets/js/102.8276d3aa.js"><link rel="prefetch" href="/blog/assets/js/103.6996f4f0.js"><link rel="prefetch" href="/blog/assets/js/104.e2a5a583.js"><link rel="prefetch" href="/blog/assets/js/105.1ab15095.js"><link rel="prefetch" href="/blog/assets/js/106.3d4e1246.js"><link rel="prefetch" href="/blog/assets/js/107.b641fb8e.js"><link rel="prefetch" href="/blog/assets/js/108.d404ad7e.js"><link rel="prefetch" href="/blog/assets/js/109.e4e6ef9a.js"><link rel="prefetch" href="/blog/assets/js/11.275e015e.js"><link rel="prefetch" href="/blog/assets/js/110.156a298b.js"><link rel="prefetch" href="/blog/assets/js/111.2732f532.js"><link rel="prefetch" href="/blog/assets/js/112.305d13cc.js"><link rel="prefetch" href="/blog/assets/js/113.8c5b6f1c.js"><link rel="prefetch" href="/blog/assets/js/114.17898182.js"><link rel="prefetch" href="/blog/assets/js/115.63b28225.js"><link rel="prefetch" href="/blog/assets/js/116.7d75a7ce.js"><link rel="prefetch" href="/blog/assets/js/117.fcb4cbdb.js"><link rel="prefetch" href="/blog/assets/js/118.7b91b6c9.js"><link rel="prefetch" href="/blog/assets/js/119.eb6f64e2.js"><link rel="prefetch" href="/blog/assets/js/12.5ef8c401.js"><link rel="prefetch" href="/blog/assets/js/120.088e0013.js"><link rel="prefetch" href="/blog/assets/js/121.6b93f16f.js"><link rel="prefetch" href="/blog/assets/js/122.e554b243.js"><link rel="prefetch" href="/blog/assets/js/123.d3593f9b.js"><link rel="prefetch" href="/blog/assets/js/124.5cc3ae1a.js"><link rel="prefetch" href="/blog/assets/js/125.80cac022.js"><link rel="prefetch" href="/blog/assets/js/126.171caedd.js"><link rel="prefetch" href="/blog/assets/js/127.dacac129.js"><link rel="prefetch" href="/blog/assets/js/128.4516a871.js"><link rel="prefetch" href="/blog/assets/js/129.3d915cae.js"><link rel="prefetch" href="/blog/assets/js/13.d6a8644e.js"><link rel="prefetch" href="/blog/assets/js/130.9f7bd10a.js"><link rel="prefetch" href="/blog/assets/js/131.a31ebc8d.js"><link rel="prefetch" href="/blog/assets/js/132.7ebddbb6.js"><link rel="prefetch" href="/blog/assets/js/133.e0d043eb.js"><link rel="prefetch" href="/blog/assets/js/134.3552152d.js"><link rel="prefetch" href="/blog/assets/js/135.b1bccae4.js"><link rel="prefetch" href="/blog/assets/js/136.6566363e.js"><link rel="prefetch" href="/blog/assets/js/137.36d6fb68.js"><link rel="prefetch" href="/blog/assets/js/138.09ffcf0f.js"><link rel="prefetch" href="/blog/assets/js/139.3e594ffd.js"><link rel="prefetch" href="/blog/assets/js/14.301d6740.js"><link rel="prefetch" href="/blog/assets/js/140.4a5c39ac.js"><link rel="prefetch" href="/blog/assets/js/141.22b7af73.js"><link rel="prefetch" href="/blog/assets/js/142.c94e2c68.js"><link rel="prefetch" href="/blog/assets/js/143.708afaa2.js"><link rel="prefetch" href="/blog/assets/js/144.0ac4b88f.js"><link rel="prefetch" href="/blog/assets/js/145.e050f975.js"><link rel="prefetch" href="/blog/assets/js/146.faae12c7.js"><link rel="prefetch" href="/blog/assets/js/147.a4863652.js"><link rel="prefetch" href="/blog/assets/js/148.7f2629f3.js"><link rel="prefetch" href="/blog/assets/js/149.44a02e92.js"><link rel="prefetch" href="/blog/assets/js/15.e5e5ebbd.js"><link rel="prefetch" href="/blog/assets/js/150.94add1c7.js"><link rel="prefetch" href="/blog/assets/js/151.f33bd838.js"><link rel="prefetch" href="/blog/assets/js/152.b2ae7eba.js"><link rel="prefetch" href="/blog/assets/js/153.8b874198.js"><link rel="prefetch" href="/blog/assets/js/154.82a18945.js"><link rel="prefetch" href="/blog/assets/js/155.fc4a6f90.js"><link rel="prefetch" href="/blog/assets/js/156.0a129127.js"><link rel="prefetch" href="/blog/assets/js/157.6c24a8e0.js"><link rel="prefetch" href="/blog/assets/js/158.11e158e2.js"><link rel="prefetch" href="/blog/assets/js/159.b357dc61.js"><link rel="prefetch" href="/blog/assets/js/16.b9d84ed4.js"><link rel="prefetch" href="/blog/assets/js/160.ef44d449.js"><link rel="prefetch" href="/blog/assets/js/161.d19d35f2.js"><link rel="prefetch" href="/blog/assets/js/162.690299af.js"><link rel="prefetch" href="/blog/assets/js/163.dd52bf81.js"><link rel="prefetch" href="/blog/assets/js/164.6a596ef0.js"><link rel="prefetch" href="/blog/assets/js/165.cbf84bb4.js"><link rel="prefetch" href="/blog/assets/js/166.18848cef.js"><link rel="prefetch" href="/blog/assets/js/167.d4a56c8c.js"><link rel="prefetch" href="/blog/assets/js/168.0cae0645.js"><link rel="prefetch" href="/blog/assets/js/169.7fe73c1d.js"><link rel="prefetch" href="/blog/assets/js/17.426156e8.js"><link rel="prefetch" href="/blog/assets/js/170.1ee706bc.js"><link rel="prefetch" href="/blog/assets/js/171.6495927b.js"><link rel="prefetch" href="/blog/assets/js/172.a896ed99.js"><link rel="prefetch" href="/blog/assets/js/173.5015228d.js"><link rel="prefetch" href="/blog/assets/js/174.b345c0b3.js"><link rel="prefetch" href="/blog/assets/js/175.0c14910b.js"><link rel="prefetch" href="/blog/assets/js/176.d40b59bf.js"><link rel="prefetch" href="/blog/assets/js/177.ada5200a.js"><link rel="prefetch" href="/blog/assets/js/178.fd6f5988.js"><link rel="prefetch" href="/blog/assets/js/179.74ad5ac6.js"><link rel="prefetch" href="/blog/assets/js/18.fde64886.js"><link rel="prefetch" href="/blog/assets/js/180.c777d2b2.js"><link rel="prefetch" href="/blog/assets/js/181.169686a0.js"><link rel="prefetch" href="/blog/assets/js/182.9389ba06.js"><link rel="prefetch" href="/blog/assets/js/183.eb09bc5d.js"><link rel="prefetch" href="/blog/assets/js/184.c4b91aab.js"><link rel="prefetch" href="/blog/assets/js/185.197fad4c.js"><link rel="prefetch" href="/blog/assets/js/186.a9085711.js"><link rel="prefetch" href="/blog/assets/js/187.1e6e865c.js"><link rel="prefetch" href="/blog/assets/js/188.548563ab.js"><link rel="prefetch" href="/blog/assets/js/189.1ff9e7fd.js"><link rel="prefetch" href="/blog/assets/js/19.cf392fb0.js"><link rel="prefetch" href="/blog/assets/js/190.181d189c.js"><link rel="prefetch" href="/blog/assets/js/191.0809f85a.js"><link rel="prefetch" href="/blog/assets/js/192.074e82e0.js"><link rel="prefetch" href="/blog/assets/js/193.aff43155.js"><link rel="prefetch" href="/blog/assets/js/194.936bb078.js"><link rel="prefetch" href="/blog/assets/js/195.3016e44e.js"><link rel="prefetch" href="/blog/assets/js/196.f5d931c6.js"><link rel="prefetch" href="/blog/assets/js/197.e2a185c4.js"><link rel="prefetch" href="/blog/assets/js/198.668ff176.js"><link rel="prefetch" href="/blog/assets/js/199.ca01d011.js"><link rel="prefetch" href="/blog/assets/js/20.8a7ffb7e.js"><link rel="prefetch" href="/blog/assets/js/200.17032440.js"><link rel="prefetch" href="/blog/assets/js/201.4714c2f6.js"><link rel="prefetch" href="/blog/assets/js/202.dfcdd2f5.js"><link rel="prefetch" href="/blog/assets/js/203.db77aee1.js"><link rel="prefetch" href="/blog/assets/js/204.7a03df4e.js"><link rel="prefetch" href="/blog/assets/js/205.a1e1eedf.js"><link rel="prefetch" href="/blog/assets/js/206.9b281463.js"><link rel="prefetch" href="/blog/assets/js/207.61452e78.js"><link rel="prefetch" href="/blog/assets/js/208.1cd40d05.js"><link rel="prefetch" href="/blog/assets/js/209.e2ed3b73.js"><link rel="prefetch" href="/blog/assets/js/21.66230dbc.js"><link rel="prefetch" href="/blog/assets/js/210.3a31c883.js"><link rel="prefetch" href="/blog/assets/js/212.fb950ad4.js"><link rel="prefetch" href="/blog/assets/js/213.e7f30b64.js"><link rel="prefetch" href="/blog/assets/js/214.d7efe0dc.js"><link rel="prefetch" href="/blog/assets/js/215.491070b6.js"><link rel="prefetch" href="/blog/assets/js/216.8799dabf.js"><link rel="prefetch" href="/blog/assets/js/217.c178fbd2.js"><link rel="prefetch" href="/blog/assets/js/218.bd8a870b.js"><link rel="prefetch" href="/blog/assets/js/219.3fcaa625.js"><link rel="prefetch" href="/blog/assets/js/22.e6487b68.js"><link rel="prefetch" href="/blog/assets/js/220.9c91d53e.js"><link rel="prefetch" href="/blog/assets/js/221.a776ebf8.js"><link rel="prefetch" href="/blog/assets/js/222.68b39a31.js"><link rel="prefetch" href="/blog/assets/js/223.275a6954.js"><link rel="prefetch" href="/blog/assets/js/224.9f70e062.js"><link rel="prefetch" href="/blog/assets/js/225.afdf582d.js"><link rel="prefetch" href="/blog/assets/js/226.a928065b.js"><link rel="prefetch" href="/blog/assets/js/227.e2b719af.js"><link rel="prefetch" href="/blog/assets/js/228.947d47ec.js"><link rel="prefetch" href="/blog/assets/js/229.412593a9.js"><link rel="prefetch" href="/blog/assets/js/23.728862cb.js"><link rel="prefetch" href="/blog/assets/js/230.61f7bcea.js"><link rel="prefetch" href="/blog/assets/js/231.f8301029.js"><link rel="prefetch" href="/blog/assets/js/232.0a4869e0.js"><link rel="prefetch" href="/blog/assets/js/233.b9d4eb5f.js"><link rel="prefetch" href="/blog/assets/js/234.7d0c3878.js"><link rel="prefetch" href="/blog/assets/js/235.f0facffe.js"><link rel="prefetch" href="/blog/assets/js/236.69007e3b.js"><link rel="prefetch" href="/blog/assets/js/237.aaa4eae6.js"><link rel="prefetch" href="/blog/assets/js/238.863fff6e.js"><link rel="prefetch" href="/blog/assets/js/239.7de07247.js"><link rel="prefetch" href="/blog/assets/js/24.5b42a58b.js"><link rel="prefetch" href="/blog/assets/js/240.7eb2c9a8.js"><link rel="prefetch" href="/blog/assets/js/241.0f1a7f6c.js"><link rel="prefetch" href="/blog/assets/js/242.5002b6be.js"><link rel="prefetch" href="/blog/assets/js/243.04abd966.js"><link rel="prefetch" href="/blog/assets/js/244.6fc42a7b.js"><link rel="prefetch" href="/blog/assets/js/245.14198d08.js"><link rel="prefetch" href="/blog/assets/js/246.737c3a6d.js"><link rel="prefetch" href="/blog/assets/js/247.1a22f460.js"><link rel="prefetch" href="/blog/assets/js/248.d2e0872b.js"><link rel="prefetch" href="/blog/assets/js/249.69a7ba80.js"><link rel="prefetch" href="/blog/assets/js/25.c08f1aa9.js"><link rel="prefetch" href="/blog/assets/js/250.48d94104.js"><link rel="prefetch" href="/blog/assets/js/251.4d249837.js"><link rel="prefetch" href="/blog/assets/js/252.a9220279.js"><link rel="prefetch" href="/blog/assets/js/253.a18275ad.js"><link rel="prefetch" href="/blog/assets/js/254.832ea0ff.js"><link rel="prefetch" href="/blog/assets/js/255.7edbdfaa.js"><link rel="prefetch" href="/blog/assets/js/256.14fbf143.js"><link rel="prefetch" href="/blog/assets/js/257.0d140120.js"><link rel="prefetch" href="/blog/assets/js/258.08776a25.js"><link rel="prefetch" href="/blog/assets/js/259.8e4cf688.js"><link rel="prefetch" href="/blog/assets/js/26.f8675b42.js"><link rel="prefetch" href="/blog/assets/js/260.ed16eda6.js"><link rel="prefetch" href="/blog/assets/js/261.368fa50b.js"><link rel="prefetch" href="/blog/assets/js/262.84011805.js"><link rel="prefetch" href="/blog/assets/js/263.00f7de13.js"><link rel="prefetch" href="/blog/assets/js/264.670ee38a.js"><link rel="prefetch" href="/blog/assets/js/265.4990a4ff.js"><link rel="prefetch" href="/blog/assets/js/266.8f2a28af.js"><link rel="prefetch" href="/blog/assets/js/267.83b67f95.js"><link rel="prefetch" href="/blog/assets/js/268.7bc53a08.js"><link rel="prefetch" href="/blog/assets/js/269.63c7b5b4.js"><link rel="prefetch" href="/blog/assets/js/27.c504ebf1.js"><link rel="prefetch" href="/blog/assets/js/270.ca56b372.js"><link rel="prefetch" href="/blog/assets/js/271.96a6909d.js"><link rel="prefetch" href="/blog/assets/js/272.32ccfb2d.js"><link rel="prefetch" href="/blog/assets/js/273.0abb245f.js"><link rel="prefetch" href="/blog/assets/js/274.201d4dfb.js"><link rel="prefetch" href="/blog/assets/js/275.2537b0b3.js"><link rel="prefetch" href="/blog/assets/js/276.4fefa1b2.js"><link rel="prefetch" href="/blog/assets/js/277.fc7b390d.js"><link rel="prefetch" href="/blog/assets/js/28.325b56ef.js"><link rel="prefetch" href="/blog/assets/js/29.5d34d63b.js"><link rel="prefetch" href="/blog/assets/js/3.5ec6aa97.js"><link rel="prefetch" href="/blog/assets/js/30.742dcbdb.js"><link rel="prefetch" href="/blog/assets/js/31.e393e686.js"><link rel="prefetch" href="/blog/assets/js/32.371528bc.js"><link rel="prefetch" href="/blog/assets/js/33.7d5deb80.js"><link rel="prefetch" href="/blog/assets/js/34.7416f322.js"><link rel="prefetch" href="/blog/assets/js/35.b8c0b89a.js"><link rel="prefetch" href="/blog/assets/js/36.da6d5f98.js"><link rel="prefetch" href="/blog/assets/js/37.f62662a0.js"><link rel="prefetch" href="/blog/assets/js/38.c8fe60d1.js"><link rel="prefetch" href="/blog/assets/js/39.6287c952.js"><link rel="prefetch" href="/blog/assets/js/4.048aff81.js"><link rel="prefetch" href="/blog/assets/js/40.6a022cd3.js"><link rel="prefetch" href="/blog/assets/js/41.080260ac.js"><link rel="prefetch" href="/blog/assets/js/42.b688cbd9.js"><link rel="prefetch" href="/blog/assets/js/43.2c2beeb1.js"><link rel="prefetch" href="/blog/assets/js/44.ce218100.js"><link rel="prefetch" href="/blog/assets/js/45.5857176b.js"><link rel="prefetch" href="/blog/assets/js/46.0f2d8a68.js"><link rel="prefetch" href="/blog/assets/js/47.9381366c.js"><link rel="prefetch" href="/blog/assets/js/48.17bfa7cb.js"><link rel="prefetch" href="/blog/assets/js/49.e53e5005.js"><link rel="prefetch" href="/blog/assets/js/5.ca184b2f.js"><link rel="prefetch" href="/blog/assets/js/50.2a1d44ee.js"><link rel="prefetch" href="/blog/assets/js/51.f44e790c.js"><link rel="prefetch" href="/blog/assets/js/52.9a65afc7.js"><link rel="prefetch" href="/blog/assets/js/53.d222faa4.js"><link rel="prefetch" href="/blog/assets/js/54.5239ce4c.js"><link rel="prefetch" href="/blog/assets/js/55.94746353.js"><link rel="prefetch" href="/blog/assets/js/56.94247605.js"><link rel="prefetch" href="/blog/assets/js/57.310c2236.js"><link rel="prefetch" href="/blog/assets/js/58.ee8b3fff.js"><link rel="prefetch" href="/blog/assets/js/59.a290fd3a.js"><link rel="prefetch" href="/blog/assets/js/6.41edf020.js"><link rel="prefetch" href="/blog/assets/js/60.b6d15838.js"><link rel="prefetch" href="/blog/assets/js/61.45ff1cd8.js"><link rel="prefetch" href="/blog/assets/js/62.3e678827.js"><link rel="prefetch" href="/blog/assets/js/63.3413a854.js"><link rel="prefetch" href="/blog/assets/js/64.8527fa66.js"><link rel="prefetch" href="/blog/assets/js/65.bf893868.js"><link rel="prefetch" href="/blog/assets/js/66.a38085e0.js"><link rel="prefetch" href="/blog/assets/js/67.760d6de8.js"><link rel="prefetch" href="/blog/assets/js/68.a6ed7d42.js"><link rel="prefetch" href="/blog/assets/js/69.48ab5d68.js"><link rel="prefetch" href="/blog/assets/js/7.b1bf34b0.js"><link rel="prefetch" href="/blog/assets/js/70.d5661721.js"><link rel="prefetch" href="/blog/assets/js/71.8f65872b.js"><link rel="prefetch" href="/blog/assets/js/72.d08b2ec6.js"><link rel="prefetch" href="/blog/assets/js/73.4f86a6c7.js"><link rel="prefetch" href="/blog/assets/js/74.68b083a5.js"><link rel="prefetch" href="/blog/assets/js/75.c7c7de89.js"><link rel="prefetch" href="/blog/assets/js/76.4e502d29.js"><link rel="prefetch" href="/blog/assets/js/77.3c852431.js"><link rel="prefetch" href="/blog/assets/js/78.80356d4f.js"><link rel="prefetch" href="/blog/assets/js/79.5d54bd1c.js"><link rel="prefetch" href="/blog/assets/js/80.d1068470.js"><link rel="prefetch" href="/blog/assets/js/81.092b0805.js"><link rel="prefetch" href="/blog/assets/js/82.f8a3a07c.js"><link rel="prefetch" href="/blog/assets/js/83.f1b46b76.js"><link rel="prefetch" href="/blog/assets/js/84.48b0f5cb.js"><link rel="prefetch" href="/blog/assets/js/85.1d27a232.js"><link rel="prefetch" href="/blog/assets/js/86.79205bef.js"><link rel="prefetch" href="/blog/assets/js/87.e30298a6.js"><link rel="prefetch" href="/blog/assets/js/88.fc9e5e5b.js"><link rel="prefetch" href="/blog/assets/js/89.774f4e51.js"><link rel="prefetch" href="/blog/assets/js/90.b0649f58.js"><link rel="prefetch" href="/blog/assets/js/91.388f7793.js"><link rel="prefetch" href="/blog/assets/js/92.4200ddc0.js"><link rel="prefetch" href="/blog/assets/js/93.bc88d022.js"><link rel="prefetch" href="/blog/assets/js/94.2676bb86.js"><link rel="prefetch" href="/blog/assets/js/95.9cfd185d.js"><link rel="prefetch" href="/blog/assets/js/96.2b6dd4aa.js"><link rel="prefetch" href="/blog/assets/js/97.c6b9bb42.js"><link rel="prefetch" href="/blog/assets/js/98.9275062d.js"><link rel="prefetch" href="/blog/assets/js/99.6749df14.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.ba560735.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.84ac7da4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端技术积累</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/timeline/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术栈" class="dropdown-title"><span class="title">技术栈</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术栈" class="mobile-dropdown-title"><span class="title">技术栈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/articles/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/jquery-source-analysis/" class="nav-link">
  jquery-source-analysis
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/threejs/" class="nav-link">
  threejs
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/typescript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/vue3/" class="nav-link">
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/webgl/" class="nav-link">
  webgl
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/其他/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/算法/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="/blog/tags/" class="nav-link">
  标签
</a></div><div class="nav-item"><a href="/blog/comments/" class="nav-link">
  留言板
</a></div><div class="nav-item"><a href="/blog/summarize/" class="nav-link">
  充电站
</a></div><div class="nav-item"><a href="https://juejin.im/user/5bd074165188251ce71d8e2c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/tangjie-93/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/timeline/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术栈" class="dropdown-title"><span class="title">技术栈</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术栈" class="mobile-dropdown-title"><span class="title">技术栈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/articles/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/es6/" class="nav-link">
  es6
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/http/" class="nav-link">
  http
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/jquery-source-analysis/" class="nav-link">
  jquery-source-analysis
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/threejs/" class="nav-link">
  threejs
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/typescript/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/vue3/" class="nav-link">
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/webgl/" class="nav-link">
  webgl
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/其他/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/blog/articles/算法/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="/blog/tags/" class="nav-link">
  标签
</a></div><div class="nav-item"><a href="/blog/comments/" class="nav-link">
  留言板
</a></div><div class="nav-item"><a href="/blog/summarize/" class="nav-link">
  充电站
</a></div><div class="nav-item"><a href="https://juejin.im/user/5bd074165188251ce71d8e2c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/tangjie-93/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/blog/articles/typescript/" aria-current="page" class="active sidebar-link">typescript基本知识点总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_1、基本类型和扩展类型" class="sidebar-link">1、基本类型和扩展类型</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_2、变量声明" class="sidebar-link">2、变量声明</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_3、接口" class="sidebar-link">3、接口</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_4、类" class="sidebar-link">4、类</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_5、函数" class="sidebar-link">5、函数</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_6、泛型" class="sidebar-link">6、泛型</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_7、类型兼容性" class="sidebar-link">7、类型兼容性</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_8、高级类型" class="sidebar-link">8、高级类型</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_9、迭代器" class="sidebar-link">9、迭代器</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_10、模块" class="sidebar-link">10、模块</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_11、命名空间" class="sidebar-link">11、命名空间</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_12、声明合并" class="sidebar-link">12、声明合并</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_13、混合" class="sidebar-link">13、混合</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_14、装饰器" class="sidebar-link">14、装饰器</a></li><li class="sidebar-sub-header"><a href="/blog/articles/typescript/#_15、this" class="sidebar-link">15、this</a></li></ul></li><li><a href="/blog/articles/typescript/@Emit装饰器的内部实现解密.html" class="sidebar-link">Emit装饰器的内部实现解密</a></li><li><a href="/blog/articles/typescript/typescript在vue中的使用.html" class="sidebar-link">typescript在vue中的使用</a></li><li><a href="/blog/articles/typescript/typescript重难点知识梳理.html" class="sidebar-link">1、接口之可索引的类型</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1、基本类型和扩展类型"><a href="#_1、基本类型和扩展类型" class="header-anchor">#</a> 1、基本类型和扩展类型</h2> <p><code>ts</code> 和 <code>js</code> 共享相同的基本类型，还有一些其独有的类型如<code>元组、枚举、和any及void</code>。</p> <ul><li>1、布尔类型</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">let</span> flag<span class="token operator">:</span><span class="token builtin">boolean</span><span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>2、数字类型</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">let</span> count<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>3、字符串</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">let</span> str<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">=</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>4、数组</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">let</span> list<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;42q4&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rtrwet&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;etetrs&quot;</span><span class="token punctuation">]</span>
    <span class="token comment">//数组泛型 Array&lt;元素类型&gt;</span>
    <span class="token keyword">let</span> list<span class="token operator">:</span><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>5、元组</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token comment">//定义</span>
    <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//获取</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">//当访问一个越界的元素，会使用联合类型（此处为string|number）替代</span>
    x<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
    x<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">43</span><span class="token punctuation">;</span><span class="token comment">//ok</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>6、枚举</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red<span class="token punctuation">,</span>Blue<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//默认索引从0开始，也可以给枚举值手动赋值</span>
    <span class="token keyword">let</span> c<span class="token operator">:</span>Color<span class="token operator">=</span>Color<span class="token punctuation">.</span>Red
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Object {0:Red,1:Blue}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>7、任意值(any)</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">let</span> str<span class="token operator">:</span><span class="token builtin">any</span><span class="token operator">=</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    str<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
    str<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以调用任意方法</span>
    <span class="token keyword">let</span> obj<span class="token operator">:</span>Object<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//error Object不存在该方法</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>8、空值（void）</p> <p><code>void</code>类型与<code>any</code>类型相反，表示没有任何类型。</p></li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//函数没有返回值</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> name<span class="token operator">:</span><span class="token keyword">void</span><span class="token operator">=</span><span class="token keyword">undefined</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>9、Null和undefined</p> <p>默认情况下null和undefined是所有类型的子类型。如果编译器不能去除<code>null和undefined</code>，可以使用类型断言手动去除。语法是添加<code>!</code>后缀。</p></li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">let</span> u<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> n<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> n<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> num<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>10、类型断言</p> <p>类型断言有两种形式。一种是<strong>尖括号(&lt;&gt;)<strong>语法。一种是</strong>as语法</strong>。</p></li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">let</span> str<span class="token operator">:</span><span class="token builtin">any</span><span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
	<span class="token comment">//</span>
    <span class="token keyword">let</span> len<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> len<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token punctuation">(</span>str <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> l<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span>str<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token comment">//也是可以的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>11、never</p> <p>​		never类型表示那些<strong>永不存在的值的类型</strong>。never类型是那些总会抛出异常或者根本就<code>不会有返回值的函数表达式或者箭头函数的返回值类型</code>。</p> <p>​		never类型是任何类型的子类型，可以赋值给任何类型；但是没有任何类型是never额子类型或者可以赋值给never类型（除了never本身之外）。</p></li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>    <span class="token comment">//返回never的函数必须存在无法到达的终点</span>
    <span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">never</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Erorr</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2、变量声明"><a href="#_2、变量声明" class="header-anchor">#</a> 2、变量声明</h2> <ul><li>1、默认值</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token comment">//默认值可以让我们在属性为undefined时使用缺省值</span>
    <span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span>obj<span class="token operator">:</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>b<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token operator">=</span>obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     <span class="token comment">//默认值可以让我们在没有传递该形参时赋予默认值</span>
    <span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span>obj<span class="token operator">:</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">=</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>b<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token operator">=</span>obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p>2、const和readonly的区别</p> <p>const用于声明变量，定义后的变量不能赋值。readonly用于修饰属性，被修饰的属性只可读。</p></li></ul> <h2 id="_3、接口"><a href="#_3、接口" class="header-anchor">#</a> 3、接口</h2> <ul><li>可以用来描述对象。</li> <li>可以用来描述行为的抽象</li> <li>可以用来对函数进行约束</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Speakable</span><span class="token punctuation">{</span>
    <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token comment">//接口里只能放定义，所有的方法都是抽象的</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>  接口的作用是为了给这些类型命名和为我们的代码或者第三方代码定义契约。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">function</span> <span class="token function">printLabel</span><span class="token punctuation">(</span>labelledObj<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>labelledObj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> myObj <span class="token operator">=</span> <span class="token punctuation">{</span> size<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;james&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">printLabel</span><span class="token punctuation">(</span>myObj<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">//接口就好像一种描述</span>
    <span class="token keyword">interface</span> <span class="token class-name">labelledvalue</span><span class="token punctuation">{</span>
        label<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">printLabel</span><span class="token punctuation">(</span>labelledObj<span class="token operator">:</span>labelledvalue<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>labelledObj<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> myObj <span class="token operator">=</span> <span class="token punctuation">{</span> size<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> label<span class="token operator">:</span> <span class="token string">&quot;Size 10 Object&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">printLabel</span><span class="token punctuation">(</span>myObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>1、可选属性</strong></p> <p>  即给函数传入的参数对象只有部分赋值了。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">interface</span> <span class="token class-name">SquareConfig</span><span class="token punctuation">{</span>
        color<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token comment">//？表示可选</span>
        width<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//{color:string;area:number}表示返回类型</span>
    <span class="token keyword">function</span> <span class="token function">createSquare</span><span class="token punctuation">(</span>config<span class="token operator">:</span>SquareConfig<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> newSquare<span class="token operator">=</span><span class="token punctuation">{</span>color<span class="token operator">:</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>area<span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">{</span>
            newSquare<span class="token punctuation">.</span>color<span class="token operator">=</span>config<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">{</span>
            newSquare<span class="token punctuation">.</span>area<span class="token operator">=</span>config<span class="token punctuation">.</span>width<span class="token operator">*</span>config<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> newSquare<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> mySquare<span class="token operator">=</span><span class="token function">createSquare</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token operator">:</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>2、只读属性</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">interface</span> <span class="token class-name">Point</span><span class="token punctuation">{</span>
        <span class="token keyword">readonly</span> x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
        <span class="token keyword">readonly</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> p1<span class="token operator">:</span>Point<span class="token operator">=</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//此时p1是只读的。</span>

    <span class="token keyword">let</span> a<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> ra<span class="token operator">:</span>ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;=</span>a<span class="token punctuation">;</span><span class="token comment">//此时1也只是可读的</span>
    <span class="token comment">//但是可以通过类型断言重写</span>
    a<span class="token operator">=</span>ra <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>3、额外的属性检查</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">interface</span> <span class="token class-name">SquareConfig</span> <span class="token punctuation">{</span>
        color<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        width<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">createSquare</span><span class="token punctuation">(</span>config<span class="token operator">:</span> SquareConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> area<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//类型“{ colour: string; width: number; }”的参数不能赋给类型“SquareConfig”的参数。</span>
    <span class="token keyword">let</span> mySquare <span class="token operator">=</span> <span class="token function">createSquare</span><span class="token punctuation">(</span><span class="token punctuation">{</span> colour<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//想要绕过这些检查，有很多种方法</span>

    <span class="token comment">//方法1、可以使用类型断言，这是最简单的方式</span>
    <span class="token keyword">let</span> mySquare <span class="token operator">=</span> <span class="token function">createSquare</span><span class="token punctuation">(</span><span class="token punctuation">{</span> colour<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token keyword">as</span> SquareConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//方法2、添加一个字符串索引签名</span>
    <span class="token keyword">interface</span> <span class="token class-name">SquareConfig</span> <span class="token punctuation">{</span>
        color<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        width<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        <span class="token punctuation">[</span>propName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//方法3、将该对象赋值给另一个变量</span>
    <span class="token keyword">let</span> squareOptions <span class="token operator">=</span> <span class="token punctuation">{</span> colour<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> mySquare <span class="token operator">=</span> <span class="token function">createSquare</span><span class="token punctuation">(</span>squareOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>4、函数类型</strong></p> <p>  接口除了描述带有属性的普通对象外，接口也可以描述函数类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">interface</span> <span class="token class-name">searchFunc</span><span class="token punctuation">{</span>
        <span class="token punctuation">(</span>source<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>subString<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> search<span class="token operator">:</span>searchFunc<span class="token punctuation">;</span>
    <span class="token comment">//对于函数类型的类型检查来说，函数的参数名不需要跟接口里定义的名字相匹配。</span>
    <span class="token function-variable function">search</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>src<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>subString<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> index<span class="token operator">=</span>src<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>subString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> index<span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//如果不指定类型，Typescript的类型系统会推断出参数类型，因为函数直接赋值给了SearchFunc类型变量。函数的返回值类型是通过其返回值推断出来的（此例是false和true）</span>
    <span class="token function-variable function">search</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>subString<span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> index<span class="token operator">=</span>src<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>subString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> index<span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">?</span><span class="token boolean">true</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>5、可索引的类型</strong></p> <p>  接口支持两种索引签名：<strong>字符串和数字</strong>。字符串索引签名能很好的描述 <code>dictionary</code> 模式，并且也会保证所有属性与其返回值类型相匹配。</p> <p><strong>注意：</strong> 可以同时使用两种类型的索引，<strong>数字索引的返回值必须是字符串索引返回值类型的子类型</strong></p> <ul><li>1、字符串索引签名</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">StringArray</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>index<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token comment">//表示当用number去索引StringArray类型的数据时会得到string类型的返回值。</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr<span class="token operator">:</span>StringArray<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str<span class="token operator">=</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//test</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>2、字符串索引和数字索引同时存在</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
    breed<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">cat</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span>Animal<span class="token punctuation">;</span><span class="token comment">//报错，因为Animal并不是Dog的子类型，因为数字索引的返回值必须是字符串索引返回值类型的子类型</span>
    <span class="token punctuation">[</span>x<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span>Dog
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>3、字符串索引签名能很好的描述dictionary模式，并且也会保证所有属性与其返回值类型相匹配</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code> <span class="token keyword">interface</span> <span class="token class-name">NumberDictionary</span> <span class="token punctuation">{</span>
     <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
     length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>    <span class="token comment">// 可以，length是number类型</span>
     name<span class="token operator">:</span> <span class="token builtin">string</span>       <span class="token comment">// 错误，`name`的类型不是索引类型的子类型</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>4、可以将索引签名设置为只读</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ReadonlyStringArray</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> myArray<span class="token operator">:</span> ReadonlyStringArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
myArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Mallory&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <p><strong>6、类类型</strong></p> <p><strong>1、实现接口</strong>
  类可以实现多个接口，但是一次只能继承一个类</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token keyword">interface</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
        currentTime<span class="token operator">:</span> Date<span class="token punctuation">;</span>
        <span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token operator">:</span> Date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
        currentTime<span class="token operator">:</span> Date<span class="token punctuation">;</span>
        <span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> d<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span>h<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> clock <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Clock</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>clock<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>2、类静态部分和实例部分的区别</strong></p> <p>​		当一个类实现一个接口时，只对其实例部分进行类型检查。而constructor存在类的静态部分，所以不在检查的范围内。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//为构造函数所有，使用接口来约束类</span>
<span class="token keyword">interface</span> <span class="token class-name">ClockConstructor</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token punctuation">(</span>hour<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> minute<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> ClockInterface<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//为实例方法所用</span>
<span class="token keyword">interface</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
    <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createClock</span><span class="token punctuation">(</span>ctor<span class="token operator">:</span> ClockConstructor<span class="token punctuation">,</span> hour<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> minute<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> ClockInterface <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span>hour<span class="token punctuation">,</span> minute<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DigitalClock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>h<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beep beep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//类可以实现多个接口，但是一次只能继承一个类</span>
<span class="token keyword">class</span> <span class="token class-name">AnalogClock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>h<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;tick tock&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> digital <span class="token operator">=</span> <span class="token function">createClock</span><span class="token punctuation">(</span>DigitalClock<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> analog <span class="token operator">=</span> <span class="token function">createClock</span><span class="token punctuation">(</span>AnalogClock<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>3、继承（扩展）接口</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">PenStroke</span> <span class="token punctuation">{</span>
    penWidth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span><span class="token punctuation">,</span> PenStroke <span class="token punctuation">{</span>
    sideLength<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> square <span class="token operator">=</span> <span class="token operator">&lt;</span>Square<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
square<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">;</span>
square<span class="token punctuation">.</span>sideLength <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
square<span class="token punctuation">.</span>penWidth <span class="token operator">=</span> <span class="token number">5.0</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>4、抽象类VS接口</strong></p> <ul><li>不同类之间共有的属性或方法，可以抽象成一个接口。</li> <li>而抽象类是供其他类继承的基类，抽象类不允许实例化。抽象类中的抽象方法必须放在子类中被实现。</li> <li>抽象类本质是一个无法实例化的类，其中能够实现方法和初始化属性，而接口仅能用于描述，既不提供方法的实现，也不为属性进行初始化。</li> <li>一个类可以继承一个类或者抽象类，但可以实现多个接口。</li> <li>抽象类也可以实现接口。</li></ul> <hr> <h2 id="_4、类"><a href="#_4、类" class="header-anchor">#</a> 4、类</h2> <p>  成员默认是公有public的，当成员被标记为private时，就不能再声明它的类的外部访问。标记为protected的成员可以在派生类中访问。如果constructor也被标识为protected时，则该类不能被实例化，只能在该类的子类中实例化。</p> <p><strong>1、protected修饰符</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code> <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
     <span class="token keyword">protected</span> name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
     <span class="token comment">//该类不能在包含它的类外被实例化，但是能被继承</span>
     <span class="token keyword">protected</span> <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Employ</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> department<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>department<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>department<span class="token operator">=</span>department<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> emp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Employ</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;研发部&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;james&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>2、readonly 修饰符(只读属性必须在声明时或构造函数里被初始化)</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code> <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
     <span class="token keyword">readonly</span> name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
     <span class="token keyword">readonly</span> count<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>
     <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token keyword">let</span> dad <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Octopus</span><span class="token punctuation">(</span><span class="token string">&quot;Man with the 8 strong legs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dad<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Man with the 3-piece suit&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 错误! name 是只读的.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>3、参数属性</strong></p> <p>​		参数属性通过给构造函数参数添加一个访问限定符来声明。在构造函数里使用<code>private name: string</code>来创建和初始化一个成员，把声明和赋值合并至一处</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>4、静态属性</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Grid</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> origin <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">calculateDistanceFromOrigin</span><span class="token punctuation">(</span>point<span class="token operator">:</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> xDist <span class="token operator">=</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>x <span class="token operator">-</span> Grid<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> yDist <span class="token operator">=</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>y <span class="token operator">-</span> Grid<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>xDist <span class="token operator">*</span> xDist <span class="token operator">+</span> yDist <span class="token operator">*</span> yDist<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scale<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token keyword">public</span> scale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>5、抽象类 是其他类继承的基类，一般不会被实例化。抽象类可以包含成员的实现细节。</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span> <span class="token comment">//抽象类</span>
    <span class="token keyword">abstract</span> <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token comment">//抽象方法，不包含具体实现，必须在派生类中实现。</span>
    <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'roaming the earch...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>6、存取器 通过getters/setters来截取对对象成员的访问。 它能帮助你有效的控制对对象成员的访问。</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> passcode <span class="token operator">=</span> <span class="token string">&quot;secret passcode&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> _fullName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">get</span> <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_fullName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">set</span> <span class="token function">fullName</span><span class="token punctuation">(</span>newName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>passcode <span class="token operator">&amp;&amp;</span> passcode <span class="token operator">==</span> <span class="token string">&quot;secret passcode&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_fullName <span class="token operator">=</span> newName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Error: Unauthorized update of employee!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token keyword">let</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
employee<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token string">&quot;Bob Smith&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>employee<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><hr> <h2 id="_5、函数"><a href="#_5、函数" class="header-anchor">#</a> 5、函数</h2> <p><strong>1、为函数定义类型</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    
    <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> <span class="token function-variable function">myAdd</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>2、书写完整函数类型 函数类型包括参数类型和返回值类型。</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>    <span class="token keyword">let</span> <span class="token function-variable function">myAdd</span><span class="token operator">:</span> <span class="token punctuation">(</span>baseValue<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> increment<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">number</span> <span class="token operator">=</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3、可选参数（？）和默认参数（提前给参数赋值）</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//带默认值的参数不需要放在必须参数的后面。如果带默认值的参数出现在必须参数前面，用户必须明确的传入undefined值来获得默认值。</span>
<span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> lastName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastName<span class="token punctuation">)</span>
        <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> lastName<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token keyword">return</span> firstName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// works correctly now</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Adams&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sr.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// error, too many parameters</span>
<span class="token keyword">let</span> result3 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Adams&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ah, just right</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>4、剩余参数</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>restOfName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> restOfName<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> employeeName <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">&quot;Joseph&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Samuel&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Lucas&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MacKinZie&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>5、重载</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> suits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;hearts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;spades&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clubs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;diamonds&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//函数的定义和声明要在一起</span>
<span class="token comment">//重载时只需要定义函数就行，不用实现</span>
<span class="token keyword">function</span> <span class="token function">pickCard</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token punctuation">{</span>suit<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> card<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">//重载1</span>
<span class="token keyword">function</span> <span class="token function">pickCard</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>suit<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> card<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//重载2</span>
<span class="token keyword">function</span> <span class="token function">pickCard</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
    <span class="token comment">// Check to see if we're working with an object/array</span>
    <span class="token comment">// if so, they gave us the deck and we'll pick the card</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> pickedCard <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> x<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> pickedCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Otherwise just let them pick the card</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> pickedSuit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>x <span class="token operator">/</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> suit<span class="token operator">:</span> suits<span class="token punctuation">[</span>pickedSuit<span class="token punctuation">]</span><span class="token punctuation">,</span> card<span class="token operator">:</span> x <span class="token operator">%</span> <span class="token number">13</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>6、this</strong></p> <p>  在函数式编程中，直接在函数中调用<code>this</code>会报错，此时需要提供一个显示的<code>this</code>参数，该参数是一个假的参数，出现在参数列表的最前面。或者使用箭头函数，来让<code>this</code>指向其外层作用域中的<code>this</code>。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token function-variable function">fn</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">void</span><span class="token punctuation">,</span>immediate<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">,</span>time<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token operator">:</span><span class="token builtin">any</span><span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        timer<span class="token operator">&amp;&amp;</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> result<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>immediate<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//time时间后，才能再次调用</span>
            <span class="token operator">!</span>timer<span class="token operator">&amp;&amp;</span>result<span class="token operator">=</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            timer<span class="token operator">=</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                timer<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            timer<span class="token operator">=</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                timer<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
                result<span class="token operator">=</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><hr> <h2 id="_6、泛型"><a href="#_6、泛型" class="header-anchor">#</a> 6、泛型</h2> <p>使用泛型可以创建重用的组件，可以支持多种数据类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>使用泛型的两种方法。</strong></p> <ul><li><p>传入所有的参数，包含类型参数。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;myString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// type of output will be 'string'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>利用类型推导——编译器会根据传入的参数自动的帮助我们确定<code>T</code>的类型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token function">identity</span><span class="token punctuation">(</span><span class="token string">&quot;myString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// type of output will be 'string'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h4 id="_1、使用泛型变量"><a href="#_1、使用泛型变量" class="header-anchor">#</a> 1、使用泛型变量</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Array has a .length, so no more error</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//效果同上</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Array has a .length, so no more error</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_2、泛型接口"><a href="#_2、泛型接口" class="header-anchor">#</a> 2、泛型接口</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">GenericIdentityFn</span> <span class="token punctuation">{</span>
    <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myIdentity<span class="token operator">:</span> GenericIdentityFn <span class="token operator">=</span> identity<span class="token punctuation">;</span>

<span class="token comment">//把非泛型函数签名作为泛型类型的一部分</span>
<span class="token keyword">interface</span> <span class="token class-name">GenericIdentityFn<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myIdentity<span class="token operator">:</span> GenericIdentityFn<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> identity<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="_3、泛型类"><a href="#_3、泛型类" class="header-anchor">#</a> 3、泛型类</h4> <p>​		泛型类指的是实例部分的类型，类的静态属性不能使用这个泛型类型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">GenericNumber<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    zeroValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myGenericNumber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericNumber<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myGenericNumber<span class="token punctuation">.</span>zeroValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
myGenericNumber<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_4、泛型约束-extends"><a href="#_4、泛型约束-extends" class="header-anchor">#</a> 4、泛型约束（extends）</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Lengthwise</span> <span class="token punctuation">{</span>
    length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//没有限制之前，T可以是任何类型(any),约束之后T必须有length属性</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Lengthwise<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Now we know it has a .length property, so no more error</span>
    <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p>1、在泛型约束中使用类型参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">obj</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token literal-property property">key</span><span class="token operator">:</span><span class="token constant">K</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token literal-property property">c</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>2、在泛型里使用类类型</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//使用泛型创建工厂函数，引用构造函数的类类型</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>c<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//或者</span>
<span class="token keyword">interface</span> <span class="token class-name">PersonConstructor<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>c<span class="token operator">:</span>PersonConstructor<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用原型属性推断并约束构造函数与类实例的关系</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">BeeKeeper</span><span class="token punctuation">{</span>
  hasMask<span class="token operator">:</span><span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Zookeeper</span><span class="token punctuation">{</span>
  nameTag<span class="token operator">:</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
  num<span class="token operator">:</span><span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Bee</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
  keeper<span class="token operator">:</span>BeeKeeper
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
  keeper<span class="token operator">:</span>Zookeeper
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createInstance</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> Animal<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>c<span class="token operator">:</span><span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">A</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">createInstance</span><span class="token punctuation">(</span>Bee<span class="token punctuation">)</span><span class="token punctuation">.</span>keeper<span class="token punctuation">.</span>hasMask
<span class="token function">createInstance</span><span class="token punctuation">(</span>Lssion<span class="token punctuation">)</span><span class="token punctuation">.</span>keeper<span class="token punctuation">.</span>nameTag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li></ul> <h2 id="_7、类型兼容性"><a href="#_7、类型兼容性" class="header-anchor">#</a> 7、类型兼容性</h2> <p>  ts里的类型兼容性是基于结构子类型的。js里广泛的使用匿名对象，所以使用结构类型系统来描述这些类型比使用名义类型系统更好。<strong>结构化类型系统的基本原则是，如果要将<code>=</code>右边的赋值给左边的，那么右边至少具有跟左边相同的属性。</strong> 本质上上跟函数调用时的类型检查一样（实参的数据类型必须跟形参匹配）。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//例子1</span>
<span class="token keyword">interface</span> <span class="token class-name">Named</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//person实例具有name属性，所以可以成功赋值</span>
<span class="token keyword">let</span> p<span class="token operator">:</span> Named<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//例子2</span>
<span class="token keyword">interface</span> <span class="token class-name">Named</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> x<span class="token operator">:</span> Named<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> location<span class="token operator">:</span> <span class="token string">'Seattle'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_1、比较两个函数"><a href="#_1、比较两个函数" class="header-anchor">#</a> 1、比较两个函数</h4> <p>  函数传参时，参数少的可以赋值给参数多的。源函数的返回值类型必须是目标函数返回值类型的子类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">//1、比较参数列表，</span>
<span class="token keyword">let</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token punctuation">(</span>b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

y <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// OK x的每个参数都能在y中找到对应的参数，所以允许赋值。相当于调用 y 函数时，s参数变成了可选参数。反之则不可以。</span>
x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// Error调用x函数时，只能传一个参数，传两个参数肯定会报错。</span>

<span class="token comment">//2、比较返回值类型。</span>
<span class="token keyword">let</span> <span class="token function-variable function">x</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">y</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> location<span class="token operator">:</span> <span class="token string">'Seattle'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// OK 类型系统强制源函数的返回值类型必须是目标函数返回值类型的子类型。</span>
y <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error because x() lacks a location property，就比如在调用y函数时，获取的返回结果没有location后会报错。因为已经指定了返回类型。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_2、枚举"><a href="#_2、枚举" class="header-anchor">#</a> 2、枚举</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Status <span class="token punctuation">{</span> Ready<span class="token punctuation">,</span> Waiting <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">enum</span> Color <span class="token punctuation">{</span> Red<span class="token punctuation">,</span> Blue<span class="token punctuation">,</span> Green <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> status <span class="token operator">=</span> Status<span class="token punctuation">.</span>Ready<span class="token punctuation">;</span>
status <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">;</span>  <span class="token comment">// Error 不同枚举类型之间是不兼容的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_3、类"><a href="#_3、类" class="header-anchor">#</a> 3、类</h4> <p>​		比较两个类类型的对象时，只有实例的成员会被比较,类的私有成员和受保护成员会影响兼容性。静态成员和构造函数不在比较的范围内。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> feet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name：<span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> numFeet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Size</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> feet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>numFeet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a<span class="token operator">:</span> Animal<span class="token punctuation">;</span>
<span class="token keyword">let</span> s<span class="token operator">:</span> Size<span class="token punctuation">;</span>

a <span class="token operator">=</span> s<span class="token punctuation">;</span>  <span class="token comment">// OK</span>
s <span class="token operator">=</span> a<span class="token punctuation">;</span>  <span class="token comment">// OK</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_4、泛型"><a href="#_4、泛型" class="header-anchor">#</a> 4、泛型</h4> <p>​		类型参数只影响使用其作为类型一部分的结果类型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//例子1</span>
<span class="token keyword">interface</span> <span class="token class-name">Empty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> x<span class="token operator">:</span> Empty<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y<span class="token operator">:</span> Empty<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

x <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token comment">// OK, because y matches structure of x</span>

<span class="token comment">//例子2</span>
<span class="token keyword">interface</span> <span class="token class-name">NotEmpty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> x<span class="token operator">:</span> NotEmpty<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y<span class="token operator">:</span> NotEmpty<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token comment">// Error,类型不兼容</span>

<span class="token comment">//例子3 对于没有指定泛型类型的泛型参数是，会把所有泛型参数当做`any`比较</span>
<span class="token keyword">let</span> <span class="token function-variable function">identity</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">reverse</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>y<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">U</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

identity <span class="token operator">=</span> reverse<span class="token punctuation">;</span>  <span class="token comment">// OK, because (x: any) =&gt; any matches (y: any) =&gt; any</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><hr> <h2 id="_8、高级类型"><a href="#_8、高级类型" class="header-anchor">#</a> 8、高级类型</h2> <h4 id="_1、联合类型"><a href="#_1、联合类型" class="header-anchor">#</a> 1、联合类型</h4> <p>​		表示一个值可以是几种类型之一。用竖线（|）分隔每个类型。如果一个值是联合类型，我们只能<strong>访问此联合类型的所有类型里共有的成员。</strong></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Bird</span> <span class="token punctuation">{</span>
    <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Fish</span> <span class="token punctuation">{</span>
    <span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Fish <span class="token operator">|</span> Bird <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> pet <span class="token operator">=</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pet<span class="token punctuation">.</span><span class="token function">layEggs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// okay Fish类和Bird类的共有成员。</span>
pet<span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// errors</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_2、类型保护和区分类型"><a href="#_2、类型保护和区分类型" class="header-anchor">#</a> 2、类型保护和区分类型</h4> <ul><li><p>用户自定义的类型保护。简单的定义一个函数，<strong>返回值是一个谓词</strong>。谓词是<code>parameter is Type</code>形式。<code>parameter</code>必须来自于当前函数签名里的一个参数名。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">isFish</span><span class="token punctuation">(</span>per<span class="token operator">:</span>Fish <span class="token operator">|</span>Bird<span class="token punctuation">)</span><span class="token operator">:</span>per <span class="token keyword">is</span> Fish<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>per <span class="token keyword">as</span> Person<span class="token punctuation">)</span><span class="token punctuation">.</span>swin<span class="token operator">!==</span><span class="token keyword">undefined</span>
<span class="token punctuation">}</span>
<span class="token comment">//当调用isFish时，TypeScript会自动检查该变量是否是哪个具体的类型，是就返回true，否则返回false</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFish</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    pet<span class="token punctuation">.</span><span class="token function">swin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    pet<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p><code>typeof</code> 类型保护。 类型是<code>number,string,boolean,symbol</code>等简单类型。可以通过<code>typeof</code>操作符在类型注解中使用变量。告诉编译器，一个变量的类型和类型相同。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//例子1</span>
<span class="token keyword">function</span> <span class="token function">padLeft</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> padding<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> padding <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">Array</span><span class="token punctuation">(</span>padding <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> padding <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> padding <span class="token operator">+</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Expected string or number, got '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>padding<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//例子2</span>
<span class="token keyword">let</span> foo<span class="token operator">=</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bar<span class="token operator">:</span><span class="token keyword">typeof</span> foo<span class="token punctuation">;</span><span class="token comment">//bar将具有跟foo一样的类型</span>
bar<span class="token operator">=</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
bar<span class="token operator">=</span><span class="token number">345</span><span class="token punctuation">;</span><span class="token comment">// error 不能将类型“345”分配给类型“string”。</span>
<span class="token comment">//例子3</span>
<span class="token keyword">const</span> foo<span class="token operator">=</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bar<span class="token operator">:</span><span class="token keyword">typeof</span> foo<span class="token punctuation">;</span>
bar<span class="token operator">=</span><span class="token string">&quot;234&quot;</span><span class="token punctuation">;</span><span class="token comment">//error 不能将类型“&quot;234&quot;”分配给类型“&quot;123&quot;”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li> <li><p><code>instanceof</code> 类型保护。是通过构造函数来细化类型的一种方式。</p></li></ul> <h4 id="_3、交叉类型"><a href="#_3、交叉类型" class="header-anchor">#</a> 3、交叉类型</h4> <p>  将多个类型合并为一个类型。并且该类型并且包含所有类型的特性。<code>Person&amp;Animal&amp;Log</code>同时是<code>Person和Animal和Log</code>，该类型的对象同时拥有了这三种类型的成员。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">extend</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>first<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span>second<span class="token operator">:</span><span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token operator">&amp;</span><span class="token constant">U</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> result<span class="token operator">=</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&amp;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">in</span> first<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">(</span>result <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>first <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">in</span> second<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token punctuation">(</span>result <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>second <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>item<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> type<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//unionObj具有Person类和Animal类的所有实例属性和方法。</span>
<span class="token keyword">let</span> unionObj<span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;jim&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>unionObj<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//gog</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>unionObj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//jim</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>unionObj<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//jim</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>unionObj<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//dog</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="_4、类型别名"><a href="#_4、类型别名" class="header-anchor">#</a> 4、类型别名</h4> <p>  类型别名会给一个类型起个新名字。<strong>起别名不会新建一个类型</strong>，只是创建了一个新名字来引用那个类型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Name</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">NameResolver</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">NameOrResolver</span> <span class="token operator">=</span> Name <span class="token operator">|</span> NameResolver<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span>n<span class="token operator">:</span> NameOrResolver<span class="token punctuation">)</span><span class="token operator">:</span> Name <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> n <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>类型别名也可以是泛型。同时还可以使用类型别名在属性里引用自己。</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Container<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token punctuation">{</span>
	value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">;</span>
	left<span class="token operator">:</span>Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    right<span class="token operator">:</span>Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>与交叉类型一起使用，可以创造出一些复杂类型。</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token constant">T</span><span class="token operator">&amp;</span><span class="token punctuation">{</span>
	value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">;</span>
	left<span class="token operator">:</span>Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    right<span class="token operator">:</span>Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person<span class="token operator">:</span>Tree<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//注意一旦s初始化后，它的类型就确定了，不能再给他赋值其他类型的数据</span>
<span class="token keyword">var</span> s<span class="token operator">=</span>person<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
s<span class="token operator">=</span>person<span class="token punctuation">.</span>left<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
s<span class="token operator">=</span>person<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name
s<span class="token operator">=</span>person<span class="token punctuation">.</span>left<span class="token punctuation">.</span>right<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>类型名不能出现在声明右侧的任何地方。</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Yikes</span> <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Yikes<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>接口和类型别名的区别</strong></p> <ul><li>接口创建了一个新的类型，可以在任何地方使用。类型别名不会创建新类型。</li> <li>类型别名不能被<code>extends</code>和<code>implements</code>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type Text <span class="token keyword">extends</span> <span class="token class-name">point</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">z</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token comment">//报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>在无法通过接口来描述一个类型并且需要使用联合类型或元组类型时，这时通常会使用类型别名。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">radius</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
type rec<span class="token operator">=</span>Circle<span class="token operator">|</span>Point
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5、字符串字面量类型"><a href="#_5、字符串字面量类型" class="header-anchor">#</a> 5、字符串字面量类型</h4> <p>  字符串字面量类型允许我们指定字符串的固定值。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Easing</span><span class="token operator">=</span><span class="token string">&quot;ease-in&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;ease-out&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;ease-in-out&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>easeType<span class="token operator">:</span>Easing<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>easeType<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;ease-in&quot;</span><span class="token operator">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;ease-out&quot;</span><span class="token operator">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;ease-in-out&quot;</span><span class="token operator">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ease-in&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok </span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ease&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//erorr easeType参数传递的必须是Easing类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_6、可辨识联合"><a href="#_6、可辨识联合" class="header-anchor">#</a> 6、可辨识联合</h4> <p>  合并类型来创建一个可辨识联合的高级模式，也被称为<code>标签联合</code>或<code>代数数据类型</code>。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//声明将要联合的接口</span>
<span class="token comment">//1、相同属性kind</span>
<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">&quot;square&quot;</span><span class="token punctuation">;</span>
    size<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">&quot;rectangle&quot;</span><span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">;</span>
    radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//2、联合类型</span>
<span class="token keyword">type</span> <span class="token class-name">Shape</span> <span class="token operator">=</span> Square <span class="token operator">|</span> Rectangle <span class="token operator">|</span> Circle<span class="token punctuation">;</span>
<span class="token comment">//3、kind属性的类型保护</span>
<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>height <span class="token operator">*</span> s<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="_7、完整性检查"><a href="#_7、完整性检查" class="header-anchor">#</a> 7、完整性检查</h4> <p>  当没有涵盖所有可辨识联合的变化是，想让编译器通知我们报错。可以通过以下两种方式来。实现</p> <ul><li><p>指定返回值类型</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token operator">:</span> Shape<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span> <span class="token comment">// error: returns number | undefined</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>height <span class="token operator">*</span> s<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>使用never类型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">assertNever</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Unexpected object: &quot;</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">area</span><span class="token punctuation">(</span>s<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;square&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>size <span class="token operator">*</span> s<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;rectangle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span>height <span class="token operator">*</span> s<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;circle&quot;</span><span class="token operator">:</span> <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> s<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token function">assertNever</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error here if there are missing cases</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul> <h4 id="_7、索引类型"><a href="#_7、索引类型" class="header-anchor">#</a> 7、索引类型</h4> <p>  通过使用索引类型，编译器能够检查使用了动态属性名的代码。</p> <ul><li><p><strong>索引类型查询操作符</strong></p> <p><strong><code>keyof T</code>:索引类型查询操作符。</strong> 对于任何类型<code>T</code>,<strong><code>keyof T</code></strong> 的结果为<code>T</code>上已知的公共属性的联合（属性列表）。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person<span class="token operator">:</span>Person<span class="token operator">=</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">&quot;james&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">26</span>
<span class="token punctuation">}</span>
<span class="token comment">//T[K][]表示 Person[name][]或者Person[age][]   K表示name|age</span>
<span class="token comment">//keyof T 表示 Object.keys(obj);</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">pluck</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>o<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span>names<span class="token operator">:</span><span class="token constant">K</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n<span class="token operator">=&gt;</span>o<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> values<span class="token operator">:</span><span class="token punctuation">(</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">pluck</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//['james',26];</span>
<span class="token keyword">let</span> props<span class="token operator">:</span><span class="token keyword">keyof</span> Person<span class="token punctuation">;</span><span class="token comment">// name|age 获取了Person的联合属性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p><strong>索引访问操作符<code>T[K]</code></strong></p> <p>下面函数getProperty<code>里的</code>o: T<code>和</code>name: K`，意味着<strong>o[name]:T[K]</strong>，<strong>T[K]是结果类型</strong>。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getProperty</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>o<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token constant">K</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> o<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><strong>索引类型和字符串索引签名</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Map<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> keys<span class="token operator">:</span> <span class="token keyword">keyof</span> Map<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// key的数据类型为string|number</span>
<span class="token keyword">let</span> value<span class="token operator">:</span> Map<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// value的数据类型为number</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h4 id="_8、映射类型"><a href="#_8、映射类型" class="header-anchor">#</a> 8、映射类型</h4> <p>  映射类型——从旧类型里创建新类型，基于一些已存在的类型，按照一定方式转换字段。新类型以相同的形式去转换旧类型里每个属性。<code>Readonly、Required、Pick、Partial</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用类型别名来根据Person创建只读和可选类型。</span>

<span class="token number">1</span>、定义只读类型<span class="token punctuation">,</span>属于同态
<span class="token keyword">type</span> <span class="token class-name">ReadonlyPerson<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span>p <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token number">2</span>、定义可选类型，属于同态
<span class="token keyword">type</span> <span class="token class-name">PartialPerson<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token punctuation">[</span>p <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1<span class="token operator">:</span>PartialPerson<span class="token operator">=</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">&quot;james&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span><span class="token number">10</span>
<span class="token punctuation">}</span>
<span class="token number">3</span>、属于同态
<span class="token keyword">type</span> <span class="token class-name">Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span>k <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>p <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">4</span>、非同态，不会创建新的属性
<span class="token keyword">type</span> <span class="token class-name">Record<span class="token operator">&lt;</span>k <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>p <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">T</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token punctuation">{</span>
     <span class="token punctuation">[</span>p <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">//partial可选</span>
<span class="token keyword">type</span> <span class="token class-name">personPartial</span><span class="token operator">=</span>Partial<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">personReadonly</span><span class="token operator">=</span>ReadonlyPerson<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> partial<span class="token operator">:</span>personPartial<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">readonly</span><span class="token operator">:</span>personReadonly<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//required必填</span>
<span class="token keyword">type</span> <span class="token class-name">required</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>k <span class="token keyword">in</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> Person<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p<span class="token operator">:</span> required <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    gender<span class="token operator">:</span> <span class="token string">'fale'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>  映射类型的语法和索引签名的语法类型相似，映射类型内部使用了<code>for...in或者keyof</code>。包含了三个部分。</p> <ul><li>类型变量<code>p</code>，依次绑定到每个属性。</li> <li>字符串字面量联合的<code>keys</code>,表示要迭代的属性名。</li> <li>属性的结果类型。</li></ul> <h2 id="_9、迭代器"><a href="#_9、迭代器" class="header-anchor">#</a> 9、迭代器</h2> <p><strong>for...in和for...of的对比</strong></p> <blockquote><p>一个数据结构只要部署了<code>Symbol.iterator</code>属性，就被视为具有 iterator 接口，就可以用<code>for...of</code>循环遍历它的成员。也就是说，<code>for...of</code>循环内部调用的是数据结构的<code>Symbol.iterator</code>方法。</p></blockquote> <p>优点：</p> <ul><li>有着同<code>for...in</code>一样的简洁语法，但是没有<code>for...in</code>那些缺点。</li> <li>不同于<code>forEach</code>方法，它可以与<code>break</code>、<code>continue</code>和<code>return</code>配合使用。</li> <li>提供了遍历所有数据结构的统一操作接口。</li></ul> <blockquote><p><code>for...in</code>主要是为了遍历对象而设计的，不适合遍历数组。它迭代的是对象的键的列表。</p></blockquote> <p>缺点:</p> <ul><li><p>数组的键名是数字，但是<code>for...in</code>循环却是以字符串作为健名。</p></li> <li><p>遍历的健名包括对象上的所有属性名，包括手动添加的和原型上的。</p></li> <li><p>在某些情况下，会以任意顺序遍历健名。</p></li></ul> <h2 id="_10、模块"><a href="#_10、模块" class="header-anchor">#</a> 10、模块</h2> <p><strong>1、<code>export=和import = require()</code>语法</strong></p> <p>​		<code>export=</code>语法定义一个模块的到处对象。它可以是类，接口，命名空间，函数或枚举。若要<strong>导入一个使用了<code>export=</code>的模块时</strong>，必须使用TypeScript提供的特定语法 <code>import zip=require(&quot;module&quot;)</code></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>    <span class="token comment">//ZipCodeValidator.ts</span>
    <span class="token keyword">let</span> numberRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
    <span class="token keyword">class</span> <span class="token class-name">ZipCodeValidator</span> <span class="token punctuation">{</span>
        <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> numberRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">export</span> <span class="token operator">=</span> ZipCodeValidator<span class="token punctuation">;</span>

    <span class="token comment">//Test.ts</span>
    <span class="token keyword">import</span> zip <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;./ZipCodeValidator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Some samples to try</span>
    <span class="token keyword">let</span> strings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;98052&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;101&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Validators to use</span>
    <span class="token keyword">let</span> validator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Show whether each string passed each validator</span>
    strings<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> s <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> validator<span class="token punctuation">.</span><span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;does not## match&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>2、外部模块</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//node.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;url&quot;</span> <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Url</span> <span class="token punctuation">{</span>
        protocol<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        hostname<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
        pathname<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parse</span><span class="token punctuation">(</span>urlStr<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> parseQueryString<span class="token operator">?</span><span class="token punctuation">,</span> slashesDenoteHost<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Url<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;path&quot;</span> <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">normalize</span><span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token operator">...</span>paths<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">let</span> sep<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">///调用外部模块</span>
<span class="token comment">/// &lt;reference path=&quot;node.d.ts&quot;/&gt;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">URL</span> <span class="token keyword">from</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myUrl <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.typescriptlang.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>3、模块解析</strong></p> <p>​		模块解析策略:一共有<code>Node</code>和<code>Classic</code>两种。Classic是以前typescript默认的解析策略。</p> <p>​		<strong>1、Classic策略</strong></p> <ul><li><p>相对导入的模块主要是相对于导入它的文件进行解析的（先找<code>.ts</code>文件，找不到再找<code>.d.ts</code>文件）。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//在/root/src/folder/A.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./moduleB&quot;</span>
<span class="token comment">//查找流程是</span>
<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>folder<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>folder<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>对于非相对模块的导入，编译器会从包含导入文件的目录依次向上级目录进行遍历。（也是先找<code>.ts</code>文件，找不到再找<code>.d.ts</code>文件）</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//在/root/src/folder/A.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;moduleB&quot;</span>
<span class="token comment">//查找流程是</span>
<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>folder<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>folder<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
<span class="token operator">/</span>root<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token operator">/</span>root<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>2、Node.js如何解析模块</strong></p></li> <li><p>相对路径解析。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// 在/root/src/moduleA.js文件中</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;./moduleB&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//文件解析顺序为</span>
<span class="token number">1</span>、检查<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>js文件是否存在。
<span class="token number">2</span>、检查<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB目录是否包含一个<span class="token keyword">package</span><span class="token punctuation">.</span>json文件，且<span class="token keyword">package</span><span class="token punctuation">.</span>json文件指定了一个<span class="token string">&quot;main&quot;</span>模块。 在我们的例子里，如果Node<span class="token punctuation">.</span>js发现文件 <span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span>json包含了<span class="token punctuation">{</span> <span class="token string-property property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/mainModule.js&quot;</span> <span class="token punctuation">}</span>，那么Node<span class="token punctuation">.</span>js会引用<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token operator">/</span>lib<span class="token operator">/</span>mainModule<span class="token punctuation">.</span>js。
<span class="token number">3</span>、检查<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB目录是否包含一个index<span class="token punctuation">.</span>js文件。 这个文件会被隐式地当作那个文件夹下的<span class="token string">&quot;main&quot;</span>模块。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>非相对路径解析。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// 在/root/src/moduleA.js文件中</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;./moduleB&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//文件解析顺序为</span>
<span class="token number">1</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>js
<span class="token number">2</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json</span> <span class="token punctuation">(</span>如果指定了<span class="token string">&quot;main&quot;</span>属性<span class="token punctuation">)</span>
<span class="token number">3</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>js

<span class="token number">4</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>js
<span class="token number">5</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json</span> <span class="token punctuation">(</span>如果指定了<span class="token string">&quot;main&quot;</span>属性<span class="token punctuation">)</span>
<span class="token number">6</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>js

<span class="token number">7</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>js
<span class="token number">8</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json</span> <span class="token punctuation">(</span>如果指定了<span class="token string">&quot;main&quot;</span>属性<span class="token punctuation">)</span>
<span class="token number">9</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul> <p><strong>3、TypeScript如何解析模块</strong></p> <ul><li><p>相对路径时。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>在<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleA<span class="token punctuation">.</span>ts里
<span class="token keyword">import</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./moduleB&quot;</span>
<span class="token comment">///查询顺序</span>
<span class="token number">1</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token number">2</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>tsx
<span class="token number">3</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
<span class="token number">4</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json</span> <span class="token punctuation">(</span>如果指定了<span class="token string">&quot;types&quot;</span>属性<span class="token punctuation">)</span>
<span class="token number">5</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>ts
<span class="token number">6</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>tsx
<span class="token number">7</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>非相对路径时</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>在<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>moduleA<span class="token punctuation">.</span>ts里
<span class="token keyword">import</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./moduleB&quot;</span>
<span class="token comment">///查询顺序</span>
<span class="token number">1</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token number">2</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>tsx
<span class="token number">3</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
<span class="token number">4</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json</span> <span class="token punctuation">(</span>如果指定了<span class="token string">&quot;types&quot;</span>属性<span class="token punctuation">)</span>
<span class="token number">5</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>ts
<span class="token number">6</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>tsx
<span class="token number">7</span>、<span class="token operator">/</span>root<span class="token operator">/</span>src<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts

<span class="token number">8</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token number">9</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>tsx
<span class="token number">10</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
<span class="token number">11</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json</span> <span class="token punctuation">(</span>如果指定了<span class="token string">&quot;types&quot;</span>属性<span class="token punctuation">)</span>
<span class="token number">12</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>ts
<span class="token number">13</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>tsx
<span class="token number">14</span>、<span class="token operator">/</span>root<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts

<span class="token number">15</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>ts
<span class="token number">16</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>tsx
<span class="token number">17</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
<span class="token number">18</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token function">json</span> <span class="token punctuation">(</span>如果指定了<span class="token string">&quot;types&quot;</span>属性<span class="token punctuation">)</span>
<span class="token number">19</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>ts
<span class="token number">20</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>tsx
<span class="token number">21</span>、<span class="token operator">/</span>node_modules<span class="token operator">/</span>moduleB<span class="token operator">/</span>index<span class="token punctuation">.</span>d<span class="token punctuation">.</span>ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li></ul> <p><strong>4、附加的模块解析标记</strong></p> <ul><li><p><strong>BaseUrl</strong>  告诉编译器去哪里查找模块。BaseUrl的值由两者之一决定。</p> <ul><li>命令行的baseUrl值。（如果给定的路径是相对的，那么将相对于当前路径进行计算）</li> <li><code>tsconfig.json</code>里的baseUrl。（如果给定的路径是相对的，那么将相对<code>tsconfig.json</code>路径进行计算。）</li></ul></li> <li><p><strong>路径映射</strong>  TS编译器使用<code>tsconfig.json</code>文件里的<code>paths</code>来支持这样的声明映射。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span> <span class="token comment">// This must be specified if &quot;paths&quot; is.</span>
    <span class="token string-property property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;jquery&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;../node_modules/jquery/dist/jquery&quot;</span><span class="token punctuation">]</span> <span class="token comment">// 此处映射是相对于&quot;baseUrl&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>paths</code>是相对于<code>baseUrl</code>进行解析的。通过<code>paths</code>还可以指定复杂的映射。可以将一些不在同一个文件夹下的文件集中到一处。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;generated/*&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>上面的代码告诉编译器所有匹配<code>*</code>模式的模块导入会在以下两个位置查找。</p> <ul><li><code>*</code>表示名字不发生改变，映射为<code>moduleName=&gt;baseUrl/moduleName</code>。</li> <li><code>generated/*</code>表示模块名添加了<code>generated</code>前缀，所以映射为<code>moduleName=&gt;baseUrl/generated/moduleName</code></li></ul></li> <li><p><strong>利用<code>rootDirs</code>指定虚拟目录。</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;rootDirs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;src/views&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;generated/templates/views&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>​		在构建的过程中会将<code>/src/views</code>和<code>/generated/templates/views</code>的输出拷贝到同一个目录下。所以下面的配置是可以的。<strong>合并物理目录列表</strong></p> <div class="language-tree line-numbers-mode"><pre class="language-text"><code> src
 └── views
     └── view1.ts (imports './template1')
     └── view2.ts

 generated
 └── templates
         └── views
             └── template1.ts (imports './view2')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <p>​		还可以自动插入特定的路径记号来生成针对不同区域的捆绑。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;rootDirs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;src/zh&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;src/de&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;src/#{locale}&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>​		编译器现在可以将<code>import messages from './#{locale}/messages'</code>解析为<code>import messages from './zh/messages'</code>用做工具支持的目的，并允许在开发时不必了解区域信息。</p> <ul><li><p><strong>跟踪模块解析</strong></p> <p>通过<code>--traceResolution</code>启用编译器的模块解析跟踪，会告诉我们在模块解析过程中发生了什么。</p> <p>使用<code>--noResolve</code>，正常情况下，编译器会在编译之前解析模块导入。而<code>--noResolve</code>编译选项可以告诉编译器不要添加任何不在命令行上传入的文件到编译列表。</p></li></ul> <h2 id="_11、命名空间"><a href="#_11、命名空间" class="header-anchor">#</a> 11、命名空间</h2> <p>  不同的文件，如果<code>namespace</code>一样,使用的时候就如同它们在同一个文件一样。不同文件之间存在依赖关系，所以需要使用引用标签来告诉编译器文件之间的关联。
<strong>1、将大文件分离到多文件</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//Validation.ts</span>
<span class="token keyword">namespace</span> Validation<span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">StringValidator</span><span class="token punctuation">{</span>
        <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//LettersOnlyValidator.ts</span>
<span class="token comment">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span>
<span class="token keyword">namespace</span> Validation <span class="token punctuation">{</span>
    <span class="token keyword">const</span> lettersRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[A-Za-z]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LettersOnlyValidator</span> <span class="token keyword">implements</span> <span class="token class-name">StringValidator</span> <span class="token punctuation">{</span>
        <span class="token function">isAcceptable</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> lettersRegexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>2、命名空间的的别名</strong>
使用别名来简化命令空间。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">namespace</span> Shapes <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">namespace</span> Polygons <span class="token punctuation">{</span>
        <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
        <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">import</span> polygons <span class="token operator">=</span> Shapes<span class="token punctuation">.</span>Polygons<span class="token punctuation">;</span>
<span class="token keyword">let</span> sq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">polygons</span><span class="token punctuation">.</span><span class="token function">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Same as &quot;new Shapes.Polygons.Square()&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>3、外部命名空间</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//D3.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">namespace</span> <span class="token constant">D3</span> <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Selectors</span> <span class="token punctuation">{</span>
        select<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span>selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Selection<span class="token punctuation">;</span>
            <span class="token punctuation">(</span>element<span class="token operator">:</span> EventTarget<span class="token punctuation">)</span><span class="token operator">:</span> Selection<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
        y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Base</span> <span class="token keyword">extends</span> <span class="token class-name">Selectors</span> <span class="token punctuation">{</span>
        event<span class="token operator">:</span> Event<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">declare</span> <span class="token keyword">var</span> d3<span class="token operator">:</span> <span class="token constant">D3</span><span class="token punctuation">.</span>Base<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_12、声明合并"><a href="#_12、声明合并" class="header-anchor">#</a> 12、声明合并</h2> <h4 id="_1、接口合并"><a href="#_1、接口合并" class="header-anchor">#</a> <strong>1、接口合并</strong></h4> <ul><li><p>接口的非函数的成员应该是唯一的。如果它们不是唯一的，那么它们必须是相同的类型。</p></li> <li><p>对于函数成员，每个同名函数声明都会被当成这个函数的一个重载。 同时需要注意，当接口 <code>A</code>与后来的接口 <code>A</code>合并时，<strong>后面的接口具有更高的优先级。每组接口里的顺序保持不变，但是每组接口之间的顺序是后来的接口重载在靠前位置。但是当出现特殊的签名函数时，如果签名里有一个参数的类型是单一的字符串字面量，那么它将会被提升到重载列表的最顶端。</strong></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> Element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLDivElement<span class="token punctuation">;</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLSpanElement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">;</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLCanvasElement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//接口合并</span>
<span class="token keyword">interface</span> <span class="token class-name">Document</span> <span class="token punctuation">{</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLCanvasElement<span class="token punctuation">;</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLDivElement<span class="token punctuation">;</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLSpanElement<span class="token punctuation">;</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">;</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span>tagName<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> Element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <h4 id="_2、命名空间合并"><a href="#_2、命名空间合并" class="header-anchor">#</a> <strong>2、命名空间合并</strong></h4> <ul><li>对于<strong>命名空间的合并</strong>，模块导出的同名接口进行合并，构成单一命名空间内含合并后的接口。</li> <li>对于命名空间里值的合并，如果当前已经存在给定名字的命名空间，那么后来的命名空间的导出成员会被添加到应存在的那个模块里。</li> <li><strong>非导出成员</strong>仅在其原有的命名空间内可见。</li></ul> <p><strong>3、命名空间与类和函数和枚举类型合并</strong>。只要命名空间的定义符合将要合并的类型的定义，合并结果包含两者的声明类型。</p> <ul><li><p>命名空间和类合并。可以使用命名空间为类增加一些静态属性。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Album</span> <span class="token punctuation">{</span>
    label<span class="token operator">:</span> Album<span class="token punctuation">.</span>AlbumLabel<span class="token punctuation">;</span>
    name<span class="token operator">:</span> Album<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">namespace</span> Album <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AlbumLabel</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">const</span> name<span class="token operator">=</span><span class="token string">&quot;test&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>命名空间和函数合并。使用命名空间来扩展函数。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">buildLabel</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> buildLabel<span class="token punctuation">.</span>prefix <span class="token operator">+</span> name <span class="token operator">+</span> buildLabel<span class="token punctuation">.</span>suffix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> buildLabel <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">let</span> suffix <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">export</span> <span class="token keyword">let</span> prefix <span class="token operator">=</span> <span class="token string">&quot;Hello, &quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">buildLabel</span><span class="token punctuation">(</span><span class="token string">&quot;Sam Smith&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>命名空间可以用来扩展枚举型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
    red <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    green <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    blue <span class="token operator">=</span> <span class="token number">4</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> Color <span class="token punctuation">{</span>
    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mixColor</span><span class="token punctuation">(</span>colorName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>colorName <span class="token operator">==</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Color<span class="token punctuation">.</span>red <span class="token operator">+</span> Color<span class="token punctuation">.</span>green<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>colorName <span class="token operator">==</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Color<span class="token punctuation">.</span>red <span class="token operator">+</span> Color<span class="token punctuation">.</span>green <span class="token operator">+</span> Color<span class="token punctuation">.</span>blue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul> <h2 id="_13、混合"><a href="#_13、混合" class="header-anchor">#</a> 13、混合</h2> <p>​		从可重用组件构建类的另种方式是通过基类来构建他们，这种方式称为混合。</p> <p>​	 混合是一个函数，混合的步骤如下：</p> <ul><li>传入一个构造函数；</li> <li>构建一个带有新功能，并且扩展构造函数新类；</li> <li>返回这个新类。</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//1、定义构造函数的类型</span>
<span class="token keyword">type</span> <span class="token class-name">Constructor<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token comment">//2、扩展该类并返回它（扩展属性）</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">TimesTamped</span><span class="token generic class-name"><span class="token operator">&lt;</span>TBase <span class="token keyword">extends</span> Constructor<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Base<span class="token operator">:</span>TBase<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> Base<span class="token punctuation">{</span>
    timestamp<span class="token operator">=</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//3、扩展该类并返回它（扩展属性和方法）</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">Activatable</span><span class="token generic class-name"><span class="token operator">&lt;</span>TBase <span class="token keyword">extends</span> Constructor<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Base<span class="token operator">:</span> TBase<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//返回新类</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> Base <span class="token punctuation">{</span>
    isActivated <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isActivated <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isActivated <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//定义基类</span>
<span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span><span class="token builtin">number</span>  
<span class="token punctuation">}</span>
<span class="token comment">// 扩展基类并添加 TimesTamped 属性的 类</span>
<span class="token keyword">const</span> TimestampedUser <span class="token operator">=</span> <span class="token function">TimesTamped</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 扩展基类并添加 TimesTamped 和 Activatable 的类</span>
<span class="token keyword">const</span> TimestampedActivatableUser <span class="token operator">=</span> <span class="token function">TimesTamped</span><span class="token punctuation">(</span><span class="token function">Activatable</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//使用组合类</span>
<span class="token keyword">const</span> timestampedUserExample <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimestampedUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>timestampedUserExample<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> timestampedActivatableUserExample <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimestampedActivatableUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>timestampedActivatableUserExample<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>timestampedActivatableUserExample<span class="token punctuation">.</span>isActivated<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="_14、装饰器"><a href="#_14、装饰器" class="header-anchor">#</a> 14、装饰器</h2> <p>  装饰器是一种特殊类型的声明，它能够被附加到类声明、方法、访问符，属性或参数上。使用<code>@expression</code>形式，<code>expression</code>求值后必须为一个函数，在运行时调用，被装饰的声明信息作为参数传入。
其实就是一个语法糖，背后利用的是<code>Object.defineProperty(target,name,descripter)</code>。本质上是<code>AOP</code></p> <h4 id="_1、装饰器工厂"><a href="#_1、装饰器工厂" class="header-anchor">#</a> <strong>1、装饰器工厂</strong></h4> <p>是一个简单的函数，返回一个表达式，供装饰器在运行时调用。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">clolor</span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//target是被装饰的对象</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//do something with target and value</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_2、装饰器组合"><a href="#_2、装饰器组合" class="header-anchor">#</a> <strong>2、装饰器组合</strong></h4> <p>表示多个装饰器同时应用到一个声明上。当多个装饰器声明在同一个声明上会进行如下操作。</p> <ul><li><p>由上至下依次对装饰器表达式求值。</p></li> <li><p>求值的结果会被当做函数，由下至上依次调用。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;f(): evaluated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;f(): called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;g(): evaluated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;g(): called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示装饰的类的实例 =&gt; {test: ƒ, constructor: ƒ}</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>propertyKey<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示装饰的声明的名称 =&gt; test</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示对象的数据属性 =&gt; {value: ƒ, writable: true, enumerable: true, configurable: true}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">f</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">g</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>在控制台里会打印出如下结果：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> evaluated
<span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> evaluated
<span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> called
<span class="token punctuation">{</span>test<span class="token operator">:</span> ƒ<span class="token punctuation">,</span> constructor<span class="token operator">:</span> ƒ<span class="token punctuation">}</span>
<span class="token punctuation">{</span>value<span class="token operator">:</span> ƒ<span class="token punctuation">,</span> writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
test
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> called
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h4 id="_3、装饰器求值"><a href="#_3、装饰器求值" class="header-anchor">#</a> <strong>3、装饰器求值</strong></h4> <p>类中不同声明上的装饰器将按照以下规定的顺序应用。
属性方法先执行，谁先写谁先执行。参数和方法在一起的时候，先执行参数然后再执行方法。最后是类装饰器。</p> <ul><li>参数装饰器，然后依次是方法装饰器*，*访问符装饰器，或属性装饰器应用到每个实例成员。</li> <li>参数装饰器，然后依次是方法装饰器*，*访问符装饰器，或属性装饰器应用到每个静态成员。</li> <li>参数装饰器应用到构造函数。</li> <li>类装饰器应用到类。</li></ul> <h4 id="_4、类装饰器"><a href="#_4、类装饰器" class="header-anchor">#</a> <strong>4、类装饰器</strong></h4> <p>​		在类声明之前被调用。应用于类构造函数，可以用来监视、修改或替换类定义。该装饰器不能用在声明文件(<code>.d.ts</code>)，也不能用在任何外部上下文(<code>declare的类</code>)。</p> <p>​		类装饰器表达式会在运行时被当做函数调用，<strong>类的构造函数作为其唯一的参数。</strong></p> <p>​		如果类装饰器返回一个值，它会使用提供的构造函数类替换类的声明。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> constructor<span class="token punctuation">{</span>
    name<span class="token operator">=</span><span class="token string">&quot;jamestang&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><strong>1、修改构造函数原型属性</strong></p></blockquote> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">Path</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//target是类的构造函数，且是唯一的参数</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//function HelloService(){}</span>
        <span class="token operator">!</span>target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$Meta <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$Meta <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$Meta<span class="token punctuation">.</span>baseUrl <span class="token operator">=</span> path<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Path</span></span><span class="token punctuation">(</span><span class="token string">'/hello'</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>HelloService<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$Meta<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 输出：{ baseUrl: '/hello' }</span>
<span class="token keyword">let</span> hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hello<span class="token punctuation">.</span>$Meta<span class="token punctuation">)</span> <span class="token comment">// 输出：{ baseUrl: '/hello' }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p><strong>2、密封构造函数及原型,使构造函数的属性只能被修改。</strong></p></blockquote> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">sealed</span><span class="token punctuation">(</span>constructor<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">sealed</span></span>
<span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    greeting<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>greeting <span class="token operator">=</span> message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p><strong>3、重载构造函数</strong></p></blockquote> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">classDecorator</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>constructor<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//	如果类装饰器返回一个值，它会使用提供的构造函数类替换类的声明。</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token keyword">extends</span></span> constructor<span class="token punctuation">{</span>
        newProperty<span class="token operator">=</span><span class="token string">&quot;new property&quot;</span><span class="token punctuation">;</span>
        hello<span class="token operator">=</span><span class="token string">&quot;override&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">classDecorator</span></span>
<span class="token keyword">class</span> <span class="token class-name">Greeter</span><span class="token punctuation">{</span>
    property<span class="token operator">=</span><span class="token string">&quot;property&quot;</span><span class="token punctuation">;</span>
    hello<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>m<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hello<span class="token operator">=</span>m<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_5、方法装饰器"><a href="#_5、方法装饰器" class="header-anchor">#</a> <strong>5、方法装饰器</strong></h4> <p>  方法装饰器声明在一个方法的声明之前（紧靠着方法声明）。会被应用到方法的属性描述符上，可以用来监视、修改或替换方法定义。该装饰器不能用在声明文件(<code>.d.ts</code>)，也不能用在任何外部上下文(<code>declare的类</code>)。</p> <p>方法装饰器表达式会在运行时当作函数被调用，传入下列3个参数:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><strong><code>target</code></strong>——对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</p></li> <li><p><strong><code>propertyKey</code></strong>——成员的名字（被修饰的方法的名字）。</p></li> <li><p><strong><code>descriptor</code></strong>——成员的属性描述符。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    greeting<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>greeting <span class="token operator">=</span> message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">enumerable</span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">enumerable</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">=</span> value<span class="token punctuation">;</span><span class="token comment">//使属性不能被迭代</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul> <h4 id="_6、访问器装饰器"><a href="#_6、访问器装饰器" class="header-anchor">#</a> <strong>6、访问器装饰器</strong></h4> <p>访问器装饰器声明在一个访问器的声明之前（紧靠着访问器声明）。 访问器装饰器应用于访问器的属性描述符并且可以用来监视，修改或替换一个访问器的定义。访问器装饰器不能用在声明文件中（.d.ts），或者任何外部上下文（比如 <code>declare</code>的类）里。</p> <p>如果访问器装饰器返回一个值，它会被用作方法的<strong>属性描述符</strong>。</p> <p><strong>注意</strong>  TypeScript不允许同时装饰一个成员的<code>get</code>和<code>set</code>访问器。因为，在装饰器应用于一个<em>属性描述符</em>时，它联合了<code>get</code>和<code>set</code>访问器，而不是分开声明的。</p> <p>​		访问器装饰器表达式会在运行时当作函数被调用，传入下列3个参数，跟方法装饰器的参数一样。</p> <ul><li><p>1、对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</p></li> <li><p>2、成员的名字。</p></li> <li><p>3、成员的属性描述符。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> _x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> _y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_x <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">configurable</span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">get</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_x<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">configurable</span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">get</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_y<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">configurable</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        descriptor<span class="token punctuation">.</span>configurable <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <h4 id="_7、属性装饰器"><a href="#_7、属性装饰器" class="header-anchor">#</a> <strong>7、属性装饰器</strong></h4> <p>​		属性装饰器声明在一个属性声明之前（紧靠着属性声明）。 属性装饰器不能用在声明文件中（.d.ts），或者任何外部上下文（比如 <code>declare</code>的类）里。属性描述符*不会做为参数传入属性装饰器，属性描述符只能用来监视类中是否声明了某个名字的属性。</p> <p>属性装饰器表达式会在运行时当作函数被调用，传入下列2个参数：</p> <ul><li><p>第一个参数对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</p></li> <li><p>第二个参数是成员的名字。</p></li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>    <span class="token keyword">function</span> <span class="token function">setDefaultValue</span><span class="token punctuation">(</span>target<span class="token operator">:</span> Object<span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      target<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;jamestang&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
      <span class="token decorator"><span class="token at operator">@</span><span class="token function">setDefaultValue</span></span>
      name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: jamestang</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_8、参数装饰器"><a href="#_8、参数装饰器" class="header-anchor">#</a> <strong>8、参数装饰器</strong></h4> <p>参数装饰器声明在一个参数声明之前（紧靠着参数声明）。</p> <h2 id="_15、this"><a href="#_15、this" class="header-anchor">#</a> 15、this</h2> <p>​		<code>this</code>在<code>js</code>中表示对象上下文。在<code>TypeScript</code>可以通过<code>ThisType</code>我们可以在对象字面量中键入<code>this</code>，并通过上下文控制<code>this</code>的类型。主要有以下几种情况。</p> <ul><li><p>方法里显示制定了<code>this</code>。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { message: string }</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><code>this</code>参数由上下文键入。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
  <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { x: string, f(n: number): void }</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>如果 <code>--noImplicitThis</code> 选项已经启用，并且对象字面量中包含由 <code>ThisType</code> 键入的上下文类型，那么 <code>this</code> 的类型为 <code>T</code>。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// Compile with --noImplicitThis</span>

obj<span class="token punctuation">.</span><span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> n<span class="token punctuation">;</span> <span class="token comment">// 'this' has same type as 'obj'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

obj<span class="token punctuation">[</span><span class="token string">'f'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> n<span class="token punctuation">;</span> <span class="token comment">// 'this' has same type as 'obj'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>如果 <code>--noImplicitThis</code> 选项已经启用，并且对象字面量中不包含由 <code>ThisType</code> 键入的上下文类型，那么 <code>this</code> 的类型为该上下文类型。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// Compile with --noImplicitThis</span>
<span class="token comment">//type用来定义一个类型或者类型别名</span>
<span class="token keyword">type</span> <span class="token class-name">ObjectDescriptor<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">M</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  data<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">D</span><span class="token punctuation">;</span>
  methods<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">M</span> <span class="token operator">&amp;</span> ThisType<span class="token operator">&lt;</span><span class="token constant">D</span> <span class="token operator">&amp;</span> <span class="token constant">M</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// Type of 'this' in methods is D &amp; M</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeObject</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">M</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>desc<span class="token operator">:</span> ObjectDescriptor<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span> <span class="token constant">M</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">D</span> <span class="token operator">&amp;</span> <span class="token constant">M</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> data<span class="token operator">:</span> object <span class="token operator">=</span> desc<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> methods<span class="token operator">:</span> object <span class="token operator">=</span> desc<span class="token punctuation">.</span>methods <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>data<span class="token punctuation">,</span> <span class="token operator">...</span>methods <span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token constant">D</span> <span class="token operator">&amp;</span> <span class="token constant">M</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">makeObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">moveBy</span><span class="token punctuation">(</span>dx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> dy<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> dx<span class="token punctuation">;</span> <span class="token comment">// Strongly typed this</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> dy<span class="token punctuation">;</span> <span class="token comment">// Strongly typed this</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">moveBy</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li> <li><p>如果 <code>--noImplicitThis</code> 选项已经启用，<code>this</code> 具有该对象字面量的类型。</p></li> <li><p>否则，<code>this</code> 的类型为 <code>any</code>。</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/5/2020, 11:39:54 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/articles/typescript/@Emit装饰器的内部实现解密.html">
        Emit装饰器的内部实现解密
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.1db59d1a.js" defer></script><script src="/blog/assets/js/2.b41a7aaa.js" defer></script><script src="/blog/assets/js/1.844c5b44.js" defer></script><script src="/blog/assets/js/211.a8d631c2.js" defer></script>
  </body>
</html>
